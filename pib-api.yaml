openapi: 3.1.0
info:
  title: pib REST-API MOCK
  description: |-
    This API documentation is a first draft for the upcoming REST API development
  termsOfService: https://isento.de/
  contact:
    email: info@isento.de
  version: 0.0.1
tags:
  - name: personality
    description: CRUD-Operations for voice assistant personalities
  - name: chat
    description: CRUD-Operations for voice assistant chats
paths:
  /voice-assistant/personality:
    post:
      tags:
        - personality
      summary: Add a new voice assistant personality
      operationId: createVoiceAssistantPersonality
      requestBody:
        description: Add a new voice assistant personality
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantPersonality'
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/VoiceAssistantPersonality'
        '400':
          $ref: '#/components/responses/400'
        '500':
          $ref: '#/components/responses/500'
    get:
      tags: 
        - personality
      summary: Get all voice assistant personalities
      operationId: getAllVoiceAssistantPersonalities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantPersonalities'
        '400':
          $ref: '#/components/responses/400'
        '500':
          $ref: '#/components/responses/500'
  /voice-assistant/personality/{personality_id}:
    get:
      tags:
        - personality
      summary: Get a voice assistant personality by id
      operationId: getVoiceAssistantPersonalityById
      parameters:
        - name: personality_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantPersonality'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
    put:
      tags:
        - personality
      summary: Update a voice assistant personality by id
      operationId: updateVoiceAssistantPersonalityById
      parameters:
        - name: personality_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Update an existing voice assistant personality
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantPersonality'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/VoiceAssistantPersonality'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
    delete:
      tags:
        - personality
      summary: Delete a voice assistant personality by id
      operationId: deleteVoiceAssistantPersonalityById
      parameters:
        - name: personality_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          $ref: '#/components/responses/204'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
  /voice-assistant/chat/{personality_id}:
    post:
      tags:
        - chat
      summary: Add a new voice assistant chat
      operationId: createVoiceAssistantChat
      parameters:
        - name: personality_id
          description: The personality id is forwarded by the personality tab
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Add a new voice assistant chat
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantChat'
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/VoiceAssistantChat'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
  /voice-assistant/chat:
    get:
      tags: 
        - chat
      summary: Get all voice assistant chats
      operationId: getAllVoiceAssistantChats
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantChats'
        '400':
          $ref: '#/components/responses/400'
        '500':
          $ref: '#/components/responses/500'
  /voice-assistant/chat/{chat_id}:
    get:
      tags:
        - chat
      summary: Get a voice assistant chat by id
      operationId: getVoiceAssistantChatById
      parameters:
        - name: chat_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantChat'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
    put:
      tags:
        - chat
      summary: Update a voice assistant chat by id
      operationId: updateVoiceAssistantChatById
      parameters:
        - name: chat_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Update an existing voice assistant chat
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantChat'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/VoiceAssistantChat'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
    delete:
      tags:
        - chat
      summary: Delete a voice assistant chat by id
      operationId: deleteVoiceAssistantChatById
      parameters:
        - name: chat_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          $ref: '#/components/responses/204'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
  /voice-assistant/chat/{chat_id}/messages:
    get:
      tags:
        - chat
      summary: Get all messages of a voice assistant chat by chat id
      operationId: getAllVoiceAssistantChatMessagesByChatId
      parameters:
        - name: chat_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantChatMessages'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
    post:
      tags:
        - chat
      summary: Add a message to a voice assistant chat
      operationId: createVoiceAssistantChatMessage
      parameters:
        - name: chat_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Add a message to a voice assistant chat by chat id
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantChatMessage'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantChatMessage'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
components:
  schemas:
    VoiceAssistantPersonality:
      type: object
      properties:
        personality_id:
          type: string
          readOnly: true
          examples: 
            - ecb8ad22-891d-4744-80b3-7e6d6d84a5c0
            - f1eda93f-0ae3-4f41-8502-d56dddeb7034 
            - 864c6ebe-c514-4d1d-85af-8ccd385f3f17 
        name:
          type: string
          examples: 
            - Eva
            - Thomas
            - Janina
            - Georg
        description:
          type: string
          minLength: 1
          examples: 
            - You are a helpful assistant.
            - You act as a translator, translating all my messages into Japanese.
        gender:
          type: string
          enum: [Male, Female]
          examples: 
            - Female
            - Male
        pauseThreshold:
          type: number
          examples: 
            - 0.8
            - 1.0
      required:
        - personality_id
        - name
        - description
        - gender
        - pauseThreshold
    VoiceAssistantPersonalities:
      properties:
        voiceAssistantPersonalities:
          type: array
          items:
            $ref: '#/components/schemas/VoiceAssistantChat'
    VoiceAssistantChat:
      type: object
      properties:
        chat_id:
          type: string
          readOnly: true
          examples: 
            - 903edb9e-a95c-44d4-ad21-f3024c2e3f6f
            - f83913e4-ac40-498c-9bab-635958fbe096 
        topic:
          type: string
          default: New conversation
          examples: 
            - Short Stories
            - Nürnberg
            - Definition of AI today
        voiceAssistantPersonality:
          readOnly: true
          $ref: '#/components/schemas/VoiceAssistantPersonality'
      required:
        - chat_id
        - topic
        - voiceAssistantPersonality
    VoiceAssistantChats:
      properties:
        voiceAssistantChats:
          type: array
          items:
            $ref: '#/components/schemas/VoiceAssistantChat'
    VoiceAssistantChatMessage:
      type: object
      properties:
        message_id:
          type: string
          readOnly: true
          examples: 
            - 3f51b823-730b-472e-8c8f-adac5ba5ccd3
            - 8731eb50-62b0-46cf-bea9-e6e9921a7e44  
        timestamp:
          type: string
          format: date-time
          readOnly: true
          examples: 
            - "2023-09-30T08:30:00Z"
            - "2023-10-05T10:11:00Z"
        isUser:
          type: boolean
          readOnly: true
        message_content:
          type: string
          examples: 
            - Tell me a collection of short stories.
            - Hello Thomas, tell me something about Nürnberg.
            - Here is a brief definition of our current understanding of AI...
        voiceAssistantChat:
          readOnly: true
          $ref: '#/components/schemas/VoiceAssistantChat'
      required:
        - message_id
        - timestamp
        - isUser
        - message_content
        - voiceAssistantChat
    VoiceAssistantChatMessages:
      properties:
        voiceAssistantChatMessages:
          type: array
          items:
            $ref: '#/components/schemas/VoiceAssistantChatMessage'
    Error:
        required:
          - Error
        type: object
        properties:
          error:
            type: string
            examples: 
              - An error occurred
              - The requested resource is not available
  responses:
    '204':
      description: No Content
    '400':
      description: Bad Request
      content:
        application/json:
          schema: 
            $ref: '#/components/schemas/Error'
    '404':
      description: Not Found
      content:
        application/json:
          schema: 
            $ref: '#/components/schemas/Error'
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema: 
            $ref: '#/components/schemas/Error'